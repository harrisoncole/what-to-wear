const router = require('express').Router()
const DarkSkyApi = require('dark-sky-api')
const axios = require('axios')

let GOOGLE_MAPS_KEY

// if (process.env.NODE_ENV === 'development') {
require('dotenv').config()
// }

DarkSkyApi.apiKey = process.env.DARK_SKY_KEY
GOOGLE_MAPS_KEY = process.env.GOOGLE_MAPS_KEY

// else {
//   DarkSkyApi.apiKey = functions.config().app.dark_sky_key
//   GOOGLE_MAPS_KEY = functions.config().app.google_maps_key
// }

DarkSkyApi.proxy = true

const zipNotFound = new Error('zip code not found')
zipNotFound.status = 404

router.get('/:coords', async (req, res, next) => {
  try {
    const [latitude, longitude] = req.params.coords
      .split('_')
      .map(c => Number(c))

    // const weatherObj = await DarkSkyApi.loadCurrent({
    //   latitude,
    //   longitude
    // })

    // const {data} = await axios.get(
    //   `https://maps.googleapis.com/maps/api/geocode/json?latlng=${latitude},${longitude}&key=${GOOGLE_MAPS_KEY}`
    // )
    // res.json({weather: weatherObj, address: data.results[0].formatted_address})

    res.json({
      weather: {
        time: 1556390927,
        summary: 'Mostly Cloudy',
        icon: 'partly-cloudy-day',
        nearestStormDistance: 6,
        nearestStormBearing: 154,
        precipIntensity: 0,
        precipProbability: 0,
        temperature: 57.12,
        apparentTemperature: 57.12,
        dewPoint: 29.01,
        humidity: 0.34,
        pressure: 1002.07,
        windSpeed: 12.35,
        windGust: 20.98,
        windBearing: 286,
        cloudCover: 0.67,
        uvIndex: 3,
        visibility: 10,
        ozone: 399.2,
        windDirection: 'NW',
        nearestStormDirection: 'SE',
        dateTime: '2019-04-27T18:48:47.000Z'
      },
      address: '55 W 92nd St, New York, NY 10025, USA'
    })
  } catch (error) {
    next(error)
  }
})
router.get('/:coords/forecast', async (req, res, next) => {
  try {
    const [latitude, longitude] = req.params.coords
      .split('_')
      .map(c => Number(c))

    // const weatherObj = await DarkSkyApi.loadItAll('minutely', {
    //   latitude,
    //   longitude
    // })

    // res.json(weatherObj)

    res.json({
      forecast: {
        latitude: 40.7049233,
        longitude: -74.0092251,
        timezone: 'America/New_York',
        currently: {
          time: 1556393590,
          summary: 'Mostly Cloudy',
          icon: 'partly-cloudy-day',
          nearestStormDistance: 13,
          nearestStormBearing: 86,
          precipIntensity: 0,
          precipProbability: 0,
          temperature: 59.12,
          apparentTemperature: 59.12,
          dewPoint: 30.58,
          humidity: 0.34,
          pressure: 1003.02,
          windSpeed: 13.94,
          windGust: 21.73,
          windBearing: 283,
          cloudCover: 0.66,
          uvIndex: 3,
          visibility: 9.59,
          ozone: 393.54,
          windDirection: 'NW',
          nearestStormDirection: 'SE',
          dateTime: '2019-04-27T19:33:10.000Z'
        },
        hourly: {
          summary: 'Mostly cloudy until tomorrow afternoon.',
          icon: 'partly-cloudy-night',
          data: [
            {
              time: 1556391600,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 58.44,
              apparentTemperature: 58.44,
              dewPoint: 29.89,
              humidity: 0.34,
              pressure: 1002.43,
              windSpeed: 14.05,
              windGust: 21.86,
              windBearing: 281,
              cloudCover: 0.62,
              uvIndex: 3,
              visibility: 9.56,
              ozone: 397.76
            },
            {
              time: 1556395200,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 59.68,
              apparentTemperature: 59.68,
              dewPoint: 31.14,
              humidity: 0.34,
              pressure: 1003.5,
              windSpeed: 13.87,
              windGust: 21.63,
              windBearing: 285,
              cloudCover: 0.7,
              uvIndex: 2,
              visibility: 9.61,
              ozone: 390.13
            },
            {
              time: 1556398800,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 59.71,
              apparentTemperature: 59.71,
              dewPoint: 33.01,
              humidity: 0.36,
              pressure: 1005.41,
              windSpeed: 14.97,
              windGust: 26.58,
              windBearing: 288,
              cloudCover: 0.48,
              uvIndex: 2,
              visibility: 10,
              ozone: 383.42
            },
            {
              time: 1556402400,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 58.97,
              apparentTemperature: 58.97,
              dewPoint: 34.34,
              humidity: 0.39,
              pressure: 1007.04,
              windSpeed: 15.59,
              windGust: 29.43,
              windBearing: 287,
              cloudCover: 0.3,
              uvIndex: 1,
              visibility: 10,
              ozone: 378.22
            },
            {
              time: 1556406000,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 57.71,
              apparentTemperature: 57.71,
              dewPoint: 34.9,
              humidity: 0.42,
              pressure: 1008.11,
              windSpeed: 13.62,
              windGust: 26.93,
              windBearing: 289,
              cloudCover: 0.25,
              uvIndex: 0,
              visibility: 10,
              ozone: 373.75
            },
            {
              time: 1556409600,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 56.72,
              apparentTemperature: 56.72,
              dewPoint: 35.64,
              humidity: 0.45,
              pressure: 1009.31,
              windSpeed: 11.18,
              windGust: 23.5,
              windBearing: 290,
              cloudCover: 0.23,
              uvIndex: 0,
              visibility: 10,
              ozone: 369.92
            },
            {
              time: 1556413200,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0.0006,
              precipProbability: 0.01,
              precipType: 'rain',
              temperature: 54.29,
              apparentTemperature: 54.29,
              dewPoint: 36.61,
              humidity: 0.51,
              pressure: 1010.36,
              windSpeed: 9.52,
              windGust: 21.83,
              windBearing: 291,
              cloudCover: 0.44,
              uvIndex: 0,
              visibility: 10,
              ozone: 366.83
            },
            {
              time: 1556416800,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 53.44,
              apparentTemperature: 53.44,
              dewPoint: 36.57,
              humidity: 0.53,
              pressure: 1011.46,
              windSpeed: 8.77,
              windGust: 20.51,
              windBearing: 292,
              cloudCover: 0.56,
              uvIndex: 0,
              visibility: 10,
              ozone: 364.24
            },
            {
              time: 1556420400,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 52.69,
              apparentTemperature: 52.69,
              dewPoint: 36.38,
              humidity: 0.54,
              pressure: 1012.27,
              windSpeed: 8.1,
              windGust: 19.33,
              windBearing: 294,
              cloudCover: 0.43,
              uvIndex: 0,
              visibility: 10,
              ozone: 362.05
            },
            {
              time: 1556424000,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0.0004,
              precipProbability: 0.01,
              precipType: 'rain',
              temperature: 51.98,
              apparentTemperature: 51.98,
              dewPoint: 36.16,
              humidity: 0.55,
              pressure: 1013.06,
              windSpeed: 7.12,
              windGust: 16.54,
              windBearing: 290,
              cloudCover: 0.5,
              uvIndex: 0,
              visibility: 10,
              ozone: 359.74
            },
            {
              time: 1556427600,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 51.22,
              apparentTemperature: 51.22,
              dewPoint: 35.83,
              humidity: 0.55,
              pressure: 1013.66,
              windSpeed: 6.25,
              windGust: 13.8,
              windBearing: 285,
              cloudCover: 0.6,
              uvIndex: 0,
              visibility: 10,
              ozone: 357.66
            },
            {
              time: 1556431200,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 51.9,
              apparentTemperature: 51.9,
              dewPoint: 35.66,
              humidity: 0.54,
              pressure: 1014.05,
              windSpeed: 5.33,
              windGust: 11.98,
              windBearing: 286,
              cloudCover: 0.47,
              uvIndex: 0,
              visibility: 10,
              ozone: 356.95
            },
            {
              time: 1556434800,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 51.14,
              apparentTemperature: 51.14,
              dewPoint: 35.63,
              humidity: 0.55,
              pressure: 1014.29,
              windSpeed: 4.18,
              windGust: 9.12,
              windBearing: 310,
              cloudCover: 0.47,
              uvIndex: 0,
              visibility: 10,
              ozone: 358.41
            },
            {
              time: 1556438400,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0.0002,
              precipProbability: 0.01,
              precipType: 'rain',
              temperature: 50.4,
              apparentTemperature: 50.4,
              dewPoint: 35.6,
              humidity: 0.57,
              pressure: 1014.41,
              windSpeed: 2.89,
              windGust: 5.94,
              windBearing: 274,
              cloudCover: 0.65,
              uvIndex: 0,
              visibility: 10,
              ozone: 361.15
            },
            {
              time: 1556442000,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 51.42,
              apparentTemperature: 51.42,
              dewPoint: 35.07,
              humidity: 0.53,
              pressure: 1014.27,
              windSpeed: 1.29,
              windGust: 1.83,
              windBearing: 262,
              cloudCover: 0.58,
              uvIndex: 0,
              visibility: 10,
              ozone: 363.25
            },
            {
              time: 1556445600,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 51.99,
              apparentTemperature: 51.99,
              dewPoint: 35.42,
              humidity: 0.53,
              pressure: 1014.08,
              windSpeed: 2.31,
              windGust: 3.28,
              windBearing: 81,
              cloudCover: 0.71,
              uvIndex: 0,
              visibility: 10,
              ozone: 363.95
            },
            {
              time: 1556449200,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 52.87,
              apparentTemperature: 52.87,
              dewPoint: 35.89,
              humidity: 0.52,
              pressure: 1014.16,
              windSpeed: 3.62,
              windGust: 6.43,
              windBearing: 126,
              cloudCover: 0.75,
              uvIndex: 0,
              visibility: 10,
              ozone: 363.91
            },
            {
              time: 1556452800,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0006,
              precipProbability: 0.03,
              precipType: 'rain',
              temperature: 53.85,
              apparentTemperature: 53.85,
              dewPoint: 36.56,
              humidity: 0.52,
              pressure: 1014.05,
              windSpeed: 5.33,
              windGust: 9.31,
              windBearing: 123,
              cloudCover: 0.75,
              uvIndex: 1,
              visibility: 10,
              ozone: 363.51
            },
            {
              time: 1556456400,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0033,
              precipProbability: 0.09,
              precipType: 'rain',
              temperature: 53.36,
              apparentTemperature: 53.36,
              dewPoint: 37.47,
              humidity: 0.55,
              pressure: 1013.88,
              windSpeed: 7.23,
              windGust: 11.21,
              windBearing: 108,
              cloudCover: 0.87,
              uvIndex: 2,
              visibility: 10,
              ozone: 362.05
            },
            {
              time: 1556460000,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0099,
              precipProbability: 0.23,
              precipType: 'rain',
              temperature: 53.05,
              apparentTemperature: 53.05,
              dewPoint: 38.56,
              humidity: 0.58,
              pressure: 1013.92,
              windSpeed: 8.81,
              windGust: 12.83,
              windBearing: 85,
              cloudCover: 0.85,
              uvIndex: 3,
              visibility: 10,
              ozone: 360.15
            },
            {
              time: 1556463600,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0168,
              precipProbability: 0.33,
              precipType: 'rain',
              temperature: 52.37,
              apparentTemperature: 52.37,
              dewPoint: 39.55,
              humidity: 0.62,
              pressure: 1013.9,
              windSpeed: 9.78,
              windGust: 14.23,
              windBearing: 66,
              cloudCover: 0.86,
              uvIndex: 4,
              visibility: 10,
              ozone: 359.83
            },
            {
              time: 1556467200,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0198,
              precipProbability: 0.4,
              precipType: 'rain',
              temperature: 50.97,
              apparentTemperature: 50.97,
              dewPoint: 40.4,
              humidity: 0.67,
              pressure: 1013.55,
              windSpeed: 9.78,
              windGust: 15.54,
              windBearing: 61,
              cloudCover: 0.89,
              uvIndex: 4,
              visibility: 10,
              ozone: 362.25
            },
            {
              time: 1556470800,
              summary: 'Overcast',
              icon: 'cloudy',
              precipIntensity: 0.0233,
              precipProbability: 0.5,
              precipType: 'rain',
              temperature: 49.92,
              apparentTemperature: 46.17,
              dewPoint: 41.09,
              humidity: 0.72,
              pressure: 1013.1,
              windSpeed: 9.32,
              windGust: 16.85,
              windBearing: 61,
              cloudCover: 0.96,
              uvIndex: 4,
              visibility: 10,
              ozone: 366.36
            },
            {
              time: 1556474400,
              summary: 'Overcast',
              icon: 'cloudy',
              precipIntensity: 0.0255,
              precipProbability: 0.51,
              precipType: 'rain',
              temperature: 49.71,
              apparentTemperature: 45.98,
              dewPoint: 41.49,
              humidity: 0.73,
              pressure: 1013.07,
              windSpeed: 9.13,
              windGust: 17.72,
              windBearing: 54,
              cloudCover: 1,
              uvIndex: 3,
              visibility: 10,
              ozone: 370.7
            },
            {
              time: 1556478000,
              summary: 'Overcast',
              icon: 'cloudy',
              precipIntensity: 0.0224,
              precipProbability: 0.46,
              precipType: 'rain',
              temperature: 51.43,
              apparentTemperature: 51.43,
              dewPoint: 41.7,
              humidity: 0.69,
              pressure: 1013.6,
              windSpeed: 9.59,
              windGust: 17.87,
              windBearing: 35,
              cloudCover: 0.94,
              uvIndex: 3,
              visibility: 10,
              ozone: 375.23
            },
            {
              time: 1556481600,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0212,
              precipProbability: 0.38,
              precipType: 'rain',
              temperature: 53.69,
              apparentTemperature: 53.69,
              dewPoint: 41.69,
              humidity: 0.64,
              pressure: 1014.51,
              windSpeed: 10.31,
              windGust: 17.36,
              windBearing: 12,
              cloudCover: 0.83,
              uvIndex: 2,
              visibility: 10,
              ozone: 380.06
            },
            {
              time: 1556485200,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0207,
              precipProbability: 0.27,
              precipType: 'rain',
              temperature: 55.38,
              apparentTemperature: 55.38,
              dewPoint: 41.47,
              humidity: 0.59,
              pressure: 1015.62,
              windSpeed: 10.71,
              windGust: 16.61,
              windBearing: 354,
              cloudCover: 0.72,
              uvIndex: 1,
              visibility: 10,
              ozone: 384.2
            },
            {
              time: 1556488800,
              summary: 'Mostly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0116,
              precipProbability: 0.11,
              precipType: 'rain',
              temperature: 55.14,
              apparentTemperature: 55.14,
              dewPoint: 40.99,
              humidity: 0.59,
              pressure: 1017,
              windSpeed: 10.44,
              windGust: 15.51,
              windBearing: 347,
              cloudCover: 0.6,
              uvIndex: 1,
              visibility: 10,
              ozone: 387.73
            },
            {
              time: 1556492400,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0025,
              precipProbability: 0.02,
              precipType: 'rain',
              temperature: 53.86,
              apparentTemperature: 53.86,
              dewPoint: 40.32,
              humidity: 0.6,
              pressure: 1018.56,
              windSpeed: 9.79,
              windGust: 14.21,
              windBearing: 348,
              cloudCover: 0.46,
              uvIndex: 0,
              visibility: 10,
              ozone: 390.6
            },
            {
              time: 1556496000,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 52.51,
              apparentTemperature: 52.51,
              dewPoint: 39.57,
              humidity: 0.61,
              pressure: 1020.07,
              windSpeed: 9.21,
              windGust: 13.58,
              windBearing: 348,
              cloudCover: 0.34,
              uvIndex: 0,
              visibility: 10,
              ozone: 391.21
            },
            {
              time: 1556499600,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 50.34,
              apparentTemperature: 50.34,
              dewPoint: 38.9,
              humidity: 0.65,
              pressure: 1021.48,
              windSpeed: 8.92,
              windGust: 14.42,
              windBearing: 344,
              cloudCover: 0.24,
              uvIndex: 0,
              visibility: 10,
              ozone: 387.72
            },
            {
              time: 1556503200,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 49.43,
              apparentTemperature: 45.81,
              dewPoint: 38.11,
              humidity: 0.65,
              pressure: 1022.83,
              windSpeed: 8.65,
              windGust: 15.89,
              windBearing: 340,
              cloudCover: 0.12,
              uvIndex: 0,
              visibility: 10,
              ozone: 381.94
            },
            {
              time: 1556506800,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 48.73,
              apparentTemperature: 45.08,
              dewPoint: 37.06,
              humidity: 0.64,
              pressure: 1024,
              windSpeed: 8.33,
              windGust: 16.64,
              windBearing: 339,
              cloudCover: 0.04,
              uvIndex: 0,
              visibility: 10,
              ozone: 377.29
            },
            {
              time: 1556510400,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 47.97,
              apparentTemperature: 44.34,
              dewPoint: 35.26,
              humidity: 0.61,
              pressure: 1024.93,
              windSpeed: 7.88,
              windGust: 15.9,
              windBearing: 341,
              cloudCover: 0.04,
              uvIndex: 0,
              visibility: 10,
              ozone: 375.37
            },
            {
              time: 1556514000,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 48.75,
              apparentTemperature: 45.47,
              dewPoint: 33.13,
              humidity: 0.55,
              pressure: 1025.69,
              windSpeed: 7.46,
              windGust: 14.48,
              windBearing: 347,
              cloudCover: 0.06,
              uvIndex: 0,
              visibility: 10,
              ozone: 374.6
            },
            {
              time: 1556517600,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 47.75,
              apparentTemperature: 44.42,
              dewPoint: 31.42,
              humidity: 0.53,
              pressure: 1026.33,
              windSpeed: 7.13,
              windGust: 13.29,
              windBearing: 353,
              cloudCover: 0.08,
              uvIndex: 0,
              visibility: 10,
              ozone: 373.83
            },
            {
              time: 1556521200,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 46.33,
              apparentTemperature: 42.79,
              dewPoint: 30.47,
              humidity: 0.54,
              pressure: 1026.97,
              windSpeed: 6.95,
              windGust: 12.56,
              windBearing: 356,
              cloudCover: 0.09,
              uvIndex: 0,
              visibility: 10,
              ozone: 372.93
            },
            {
              time: 1556524800,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 44.89,
              apparentTemperature: 41.11,
              dewPoint: 29.97,
              humidity: 0.56,
              pressure: 1027.52,
              windSpeed: 6.85,
              windGust: 11.97,
              windBearing: 359,
              cloudCover: 0.12,
              uvIndex: 0,
              visibility: 10,
              ozone: 372
            },
            {
              time: 1556528400,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0.0002,
              precipProbability: 0.02,
              precipType: 'rain',
              temperature: 44.24,
              apparentTemperature: 40.37,
              dewPoint: 29.67,
              humidity: 0.56,
              pressure: 1028.07,
              windSpeed: 6.76,
              windGust: 11.4,
              windBearing: 6,
              cloudCover: 0.14,
              uvIndex: 0,
              visibility: 10,
              ozone: 370.86
            },
            {
              time: 1556532000,
              summary: 'Clear',
              icon: 'clear-night',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 44.5,
              apparentTemperature: 40.69,
              dewPoint: 29.62,
              humidity: 0.56,
              pressure: 1028.65,
              windSpeed: 6.75,
              windGust: 10.77,
              windBearing: 14,
              cloudCover: 0.14,
              uvIndex: 0,
              visibility: 10,
              ozone: 369.24
            },
            {
              time: 1556535600,
              summary: 'Clear',
              icon: 'clear-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 45.17,
              apparentTemperature: 41.48,
              dewPoint: 29.82,
              humidity: 0.55,
              pressure: 1029.23,
              windSpeed: 6.79,
              windGust: 10.2,
              windBearing: 25,
              cloudCover: 0.14,
              uvIndex: 0,
              visibility: 10,
              ozone: 367.53
            },
            {
              time: 1556539200,
              summary: 'Clear',
              icon: 'clear-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 46.3,
              apparentTemperature: 42.8,
              dewPoint: 29.86,
              humidity: 0.52,
              pressure: 1029.71,
              windSpeed: 6.85,
              windGust: 9.87,
              windBearing: 38,
              cloudCover: 0.15,
              uvIndex: 1,
              visibility: 10,
              ozone: 366.27
            },
            {
              time: 1556542800,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 48.82,
              apparentTemperature: 45.85,
              dewPoint: 29.51,
              humidity: 0.47,
              pressure: 1030.04,
              windSpeed: 6.82,
              windGust: 9.79,
              windBearing: 60,
              cloudCover: 0.29,
              uvIndex: 2,
              visibility: 10,
              ozone: 365.85
            },
            {
              time: 1556546400,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 52.68,
              apparentTemperature: 52.68,
              dewPoint: 28.94,
              humidity: 0.4,
              pressure: 1030.23,
              windSpeed: 6.82,
              windGust: 9.86,
              windBearing: 85,
              cloudCover: 0.47,
              uvIndex: 3,
              visibility: 10,
              ozone: 365.91
            },
            {
              time: 1556550000,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0.0002,
              precipProbability: 0.02,
              precipType: 'rain',
              temperature: 55.41,
              apparentTemperature: 55.41,
              dewPoint: 28.88,
              humidity: 0.36,
              pressure: 1030.29,
              windSpeed: 7.17,
              windGust: 10.34,
              windBearing: 107,
              cloudCover: 0.57,
              uvIndex: 4,
              visibility: 10,
              ozone: 365.38
            },
            {
              time: 1556553600,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 57.27,
              apparentTemperature: 57.27,
              dewPoint: 29.51,
              humidity: 0.34,
              pressure: 1030.1,
              windSpeed: 8.21,
              windGust: 11.56,
              windBearing: 123,
              cloudCover: 0.51,
              uvIndex: 5,
              visibility: 10,
              ozone: 363.77
            },
            {
              time: 1556557200,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 58.31,
              apparentTemperature: 58.31,
              dewPoint: 30.58,
              humidity: 0.35,
              pressure: 1029.78,
              windSpeed: 9.57,
              windGust: 13.19,
              windBearing: 135,
              cloudCover: 0.37,
              uvIndex: 6,
              visibility: 10,
              ozone: 361.55
            },
            {
              time: 1556560800,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 58.86,
              apparentTemperature: 58.86,
              dewPoint: 31.67,
              humidity: 0.36,
              pressure: 1029.36,
              windSpeed: 10.6,
              windGust: 14.44,
              windBearing: 143,
              cloudCover: 0.29,
              uvIndex: 6,
              visibility: 10,
              ozone: 359.26
            },
            {
              time: 1556564400,
              summary: 'Partly Cloudy',
              icon: 'partly-cloudy-day',
              precipIntensity: 0,
              precipProbability: 0,
              temperature: 58.6,
              apparentTemperature: 58.6,
              dewPoint: 32.67,
              humidity: 0.37,
              pressure: 1028.72,
              windSpeed: 11.07,
              windGust: 14.83,
              windBearing: 148,
              cloudCover: 0.37,
              uvIndex: 5,
              visibility: 10,
              ozone: 356.96
            }
          ]
        },
        daily: {
          summary:
            'Light rain throughout the week, with high temperatures rising to 73°F on Friday.',
          icon: 'rain',
          data: [
            {
              time: 1556337600,
              summary: 'Partly cloudy throughout the day.',
              icon: 'partly-cloudy-day',
              sunriseTime: 1556359264,
              sunsetTime: 1556408915,
              moonPhase: 0.77,
              precipIntensity: 0.0019,
              precipIntensityMax: 0.0208,
              precipIntensityMaxTime: 1556352000,
              precipProbability: 0.9,
              precipType: 'rain',
              temperatureHigh: 59.71,
              temperatureHighTime: 1556398800,
              temperatureLow: 50.4,
              temperatureLowTime: 1556438400,
              apparentTemperatureHigh: 59.71,
              apparentTemperatureHighTime: 1556398800,
              apparentTemperatureLow: 50.4,
              apparentTemperatureLowTime: 1556438400,
              dewPoint: 35.51,
              humidity: 0.49,
              pressure: 1001.87,
              windSpeed: 12.2,
              windGust: 29.43,
              windGustTime: 1556402400,
              windBearing: 284,
              cloudCover: 0.57,
              uvIndex: 4,
              uvIndexTime: 1556377200,
              visibility: 9.71,
              ozone: 393.26,
              temperatureMin: 51.83,
              temperatureMinTime: 1556348400,
              temperatureMax: 59.71,
              temperatureMaxTime: 1556398800,
              apparentTemperatureMin: 51.83,
              apparentTemperatureMinTime: 1556348400,
              apparentTemperatureMax: 59.71,
              apparentTemperatureMaxTime: 1556398800,
              windDirection: 'NW',
              dateTime: '2019-04-27T04:00:00.000Z',
              sunriseDateTime: '2019-04-27T10:01:04.000Z',
              sunsetDateTime: '2019-04-27T23:48:35.000Z',
              temperatureMinDateTime: '2019-04-27T07:00:00.000Z',
              temperatureMaxDateTime: '2019-04-27T21:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-04-27T07:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-04-27T21:00:00.000Z'
            },
            {
              time: 1556424000,
              summary: 'Mostly cloudy until evening.',
              icon: 'partly-cloudy-day',
              sunriseTime: 1556445584,
              sunsetTime: 1556495379,
              moonPhase: 0.8,
              precipIntensity: 0.0075,
              precipIntensityMax: 0.0255,
              precipIntensityMaxTime: 1556474400,
              precipProbability: 0.75,
              precipType: 'rain',
              temperatureHigh: 55.38,
              temperatureHighTime: 1556485200,
              temperatureLow: 44.24,
              temperatureLowTime: 1556528400,
              apparentTemperatureHigh: 55.38,
              apparentTemperatureHighTime: 1556485200,
              apparentTemperatureLow: 40.37,
              apparentTemperatureLowTime: 1556528400,
              dewPoint: 38.34,
              humidity: 0.6,
              pressure: 1015.63,
              windSpeed: 4.39,
              windGust: 17.87,
              windGustTime: 1556478000,
              windBearing: 14,
              cloudCover: 0.63,
              uvIndex: 4,
              uvIndexTime: 1556463600,
              visibility: 10,
              ozone: 370.24,
              temperatureMin: 48.73,
              temperatureMinTime: 1556506800,
              temperatureMax: 55.38,
              temperatureMaxTime: 1556485200,
              apparentTemperatureMin: 45.08,
              apparentTemperatureMinTime: 1556506800,
              apparentTemperatureMax: 55.38,
              apparentTemperatureMaxTime: 1556485200,
              windDirection: 'NE',
              dateTime: '2019-04-28T04:00:00.000Z',
              sunriseDateTime: '2019-04-28T09:59:44.000Z',
              sunsetDateTime: '2019-04-28T23:49:39.000Z',
              temperatureMinDateTime: '2019-04-29T03:00:00.000Z',
              temperatureMaxDateTime: '2019-04-28T21:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-04-29T03:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-04-28T21:00:00.000Z'
            },
            {
              time: 1556510400,
              summary: 'Light rain overnight.',
              icon: 'rain',
              sunriseTime: 1556531906,
              sunsetTime: 1556581842,
              moonPhase: 0.83,
              precipIntensity: 0.0025,
              precipIntensityMax: 0.0371,
              precipIntensityMaxTime: 1556593200,
              precipProbability: 0.44,
              precipType: 'rain',
              temperatureHigh: 58.86,
              temperatureHighTime: 1556560800,
              temperatureLow: 50.86,
              temperatureLowTime: 1556596800,
              apparentTemperatureHigh: 58.86,
              apparentTemperatureHighTime: 1556560800,
              apparentTemperatureLow: 50.86,
              apparentTemperatureLowTime: 1556596800,
              dewPoint: 33.13,
              humidity: 0.5,
              pressure: 1027.93,
              windSpeed: 4.29,
              windGust: 19.48,
              windGustTime: 1556589600,
              windBearing: 106,
              cloudCover: 0.38,
              uvIndex: 6,
              uvIndexTime: 1556557200,
              visibility: 9.87,
              ozone: 360.8,
              temperatureMin: 44.24,
              temperatureMinTime: 1556528400,
              temperatureMax: 58.86,
              temperatureMaxTime: 1556560800,
              apparentTemperatureMin: 40.37,
              apparentTemperatureMinTime: 1556528400,
              apparentTemperatureMax: 58.86,
              apparentTemperatureMaxTime: 1556560800,
              windDirection: 'SE',
              dateTime: '2019-04-29T04:00:00.000Z',
              sunriseDateTime: '2019-04-29T09:58:26.000Z',
              sunsetDateTime: '2019-04-29T23:50:42.000Z',
              temperatureMinDateTime: '2019-04-29T09:00:00.000Z',
              temperatureMaxDateTime: '2019-04-29T18:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-04-29T09:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-04-29T18:00:00.000Z'
            },
            {
              time: 1556596800,
              summary: 'Light rain in the morning.',
              icon: 'rain',
              sunriseTime: 1556618228,
              sunsetTime: 1556668306,
              moonPhase: 0.86,
              precipIntensity: 0.0166,
              precipIntensityMax: 0.0473,
              precipIntensityMaxTime: 1556600400,
              precipProbability: 0.96,
              precipType: 'rain',
              temperatureHigh: 70.89,
              temperatureHighTime: 1556654400,
              temperatureLow: 51.28,
              temperatureLowTime: 1556708400,
              apparentTemperatureHigh: 70.89,
              apparentTemperatureHighTime: 1556654400,
              apparentTemperatureLow: 51.28,
              apparentTemperatureLowTime: 1556708400,
              dewPoint: 50.52,
              humidity: 0.74,
              pressure: 1023.99,
              windSpeed: 3.61,
              windGust: 16.01,
              windGustTime: 1556596800,
              windBearing: 76,
              cloudCover: 0.86,
              uvIndex: 5,
              uvIndexTime: 1556640000,
              visibility: 8.82,
              ozone: 341.02,
              temperatureMin: 50.86,
              temperatureMinTime: 1556596800,
              temperatureMax: 70.89,
              temperatureMaxTime: 1556654400,
              apparentTemperatureMin: 50.86,
              apparentTemperatureMinTime: 1556596800,
              apparentTemperatureMax: 70.89,
              apparentTemperatureMaxTime: 1556654400,
              windDirection: 'E',
              dateTime: '2019-04-30T04:00:00.000Z',
              sunriseDateTime: '2019-04-30T09:57:08.000Z',
              sunsetDateTime: '2019-04-30T23:51:46.000Z',
              temperatureMinDateTime: '2019-04-30T04:00:00.000Z',
              temperatureMaxDateTime: '2019-04-30T20:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-04-30T04:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-04-30T20:00:00.000Z'
            },
            {
              time: 1556683200,
              summary: 'Overcast throughout the day.',
              icon: 'cloudy',
              sunriseTime: 1556704552,
              sunsetTime: 1556754769,
              moonPhase: 0.89,
              precipIntensity: 0.0028,
              precipIntensityMax: 0.0044,
              precipIntensityMaxTime: 1556722800,
              precipProbability: 0.54,
              precipType: 'rain',
              temperatureHigh: 55.87,
              temperatureHighTime: 1556733600,
              temperatureLow: 51.78,
              temperatureLowTime: 1556762400,
              apparentTemperatureHigh: 55.87,
              apparentTemperatureHighTime: 1556733600,
              apparentTemperatureLow: 51.78,
              apparentTemperatureLowTime: 1556762400,
              dewPoint: 47.3,
              humidity: 0.79,
              pressure: 1026.37,
              windSpeed: 9.39,
              windGust: 20.73,
              windGustTime: 1556704800,
              windBearing: 84,
              cloudCover: 0.93,
              uvIndex: 4,
              uvIndexTime: 1556722800,
              visibility: 10,
              ozone: 320.16,
              temperatureMin: 51.28,
              temperatureMinTime: 1556708400,
              temperatureMax: 57.17,
              temperatureMaxTime: 1556686800,
              apparentTemperatureMin: 51.28,
              apparentTemperatureMinTime: 1556708400,
              apparentTemperatureMax: 57.17,
              apparentTemperatureMaxTime: 1556686800,
              windDirection: 'SE',
              dateTime: '2019-05-01T04:00:00.000Z',
              sunriseDateTime: '2019-05-01T09:55:52.000Z',
              sunsetDateTime: '2019-05-01T23:52:49.000Z',
              temperatureMinDateTime: '2019-05-01T11:00:00.000Z',
              temperatureMaxDateTime: '2019-05-01T05:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-05-01T11:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-05-01T05:00:00.000Z'
            },
            {
              time: 1556769600,
              summary: 'Overcast throughout the day.',
              icon: 'cloudy',
              sunriseTime: 1556790877,
              sunsetTime: 1556841232,
              moonPhase: 0.92,
              precipIntensity: 0.0024,
              precipIntensityMax: 0.0098,
              precipIntensityMaxTime: 1556841600,
              precipProbability: 0.67,
              precipType: 'rain',
              temperatureHigh: 64.73,
              temperatureHighTime: 1556816400,
              temperatureLow: 50.91,
              temperatureLowTime: 1556866800,
              apparentTemperatureHigh: 64.73,
              apparentTemperatureHighTime: 1556816400,
              apparentTemperatureLow: 50.91,
              apparentTemperatureLowTime: 1556866800,
              dewPoint: 49.72,
              humidity: 0.75,
              pressure: 1020.98,
              windSpeed: 6.7,
              windGust: 21.79,
              windGustTime: 1556827200,
              windBearing: 92,
              cloudCover: 1,
              uvIndex: 5,
              uvIndexTime: 1556816400,
              visibility: 9.88,
              ozone: 298.52,
              temperatureMin: 52.23,
              temperatureMinTime: 1556852400,
              temperatureMax: 64.73,
              temperatureMaxTime: 1556816400,
              apparentTemperatureMin: 52.23,
              apparentTemperatureMinTime: 1556852400,
              apparentTemperatureMax: 64.73,
              apparentTemperatureMaxTime: 1556816400,
              windDirection: 'SE',
              dateTime: '2019-05-02T04:00:00.000Z',
              sunriseDateTime: '2019-05-02T09:54:37.000Z',
              sunsetDateTime: '2019-05-02T23:53:52.000Z',
              temperatureMinDateTime: '2019-05-03T03:00:00.000Z',
              temperatureMaxDateTime: '2019-05-02T17:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-05-03T03:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-05-02T17:00:00.000Z'
            },
            {
              time: 1556856000,
              summary: 'Overcast throughout the day.',
              icon: 'cloudy',
              sunriseTime: 1556877203,
              sunsetTime: 1556927695,
              moonPhase: 0.95,
              precipIntensity: 0.0129,
              precipIntensityMax: 0.0607,
              precipIntensityMaxTime: 1556938800,
              precipProbability: 0.9,
              precipType: 'rain',
              temperatureHigh: 72.72,
              temperatureHighTime: 1556917200,
              temperatureLow: 53.83,
              temperatureLowTime: 1556967600,
              apparentTemperatureHigh: 72.72,
              apparentTemperatureHighTime: 1556917200,
              apparentTemperatureLow: 53.83,
              apparentTemperatureLowTime: 1556967600,
              dewPoint: 49.95,
              humidity: 0.71,
              pressure: 1014.37,
              windSpeed: 3.58,
              windGust: 27.57,
              windGustTime: 1556938800,
              windBearing: 134,
              cloudCover: 1,
              uvIndex: 5,
              uvIndexTime: 1556899200,
              visibility: 9.38,
              ozone: 295.93,
              temperatureMin: 50.91,
              temperatureMinTime: 1556866800,
              temperatureMax: 72.72,
              temperatureMaxTime: 1556917200,
              apparentTemperatureMin: 50.91,
              apparentTemperatureMinTime: 1556866800,
              apparentTemperatureMax: 72.72,
              apparentTemperatureMaxTime: 1556917200,
              windDirection: 'SE',
              dateTime: '2019-05-03T04:00:00.000Z',
              sunriseDateTime: '2019-05-03T09:53:23.000Z',
              sunsetDateTime: '2019-05-03T23:54:55.000Z',
              temperatureMinDateTime: '2019-05-03T07:00:00.000Z',
              temperatureMaxDateTime: '2019-05-03T21:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-05-03T07:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-05-03T21:00:00.000Z'
            },
            {
              time: 1556942400,
              summary: 'Partly cloudy in the morning.',
              icon: 'partly-cloudy-day',
              sunriseTime: 1556963530,
              sunsetTime: 1557014158,
              moonPhase: 0.98,
              precipIntensity: 0.0019,
              precipIntensityMax: 0.0364,
              precipIntensityMaxTime: 1556942400,
              precipProbability: 0.16,
              precipType: 'rain',
              temperatureHigh: 68.13,
              temperatureHighTime: 1557000000,
              temperatureLow: 52.58,
              temperatureLowTime: 1557050400,
              apparentTemperatureHigh: 68.13,
              apparentTemperatureHighTime: 1557000000,
              apparentTemperatureLow: 52.58,
              apparentTemperatureLowTime: 1557050400,
              dewPoint: 38.56,
              humidity: 0.46,
              pressure: 1015.92,
              windSpeed: 10.62,
              windGust: 27.77,
              windGustTime: 1556942400,
              windBearing: 318,
              cloudCover: 0.29,
              uvIndex: 8,
              uvIndexTime: 1556985600,
              visibility: 10,
              ozone: 338.11,
              temperatureMin: 53.83,
              temperatureMinTime: 1556967600,
              temperatureMax: 68.13,
              temperatureMaxTime: 1557000000,
              apparentTemperatureMin: 53.83,
              apparentTemperatureMinTime: 1556967600,
              apparentTemperatureMax: 68.13,
              apparentTemperatureMaxTime: 1557000000,
              windDirection: 'NW',
              dateTime: '2019-05-04T04:00:00.000Z',
              sunriseDateTime: '2019-05-04T09:52:10.000Z',
              sunsetDateTime: '2019-05-04T23:55:58.000Z',
              temperatureMinDateTime: '2019-05-04T11:00:00.000Z',
              temperatureMaxDateTime: '2019-05-04T20:00:00.000Z',
              apparentTemperatureMinDateTime: '2019-05-04T11:00:00.000Z',
              apparentTemperatureMaxDateTime: '2019-05-04T20:00:00.000Z'
            }
          ]
        },
        flags: {
          sources: [
            'nearest-precip',
            'nwspa',
            'cmc',
            'gfs',
            'hrrr',
            'icon',
            'isd',
            'madis',
            'nam',
            'sref',
            'darksky'
          ],
          'nearest-station': 0.257,
          units: 'us'
        },
        offset: -4,
        updatedDateTime: '2019-04-27T19:33:10.377Z'
      },
      address: '55 W 92nd St, New York, NY 10025, USA'
    })
  } catch (error) {
    next(error)
  }
})

module.exports = router
